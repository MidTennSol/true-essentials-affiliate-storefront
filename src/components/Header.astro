---
// Global Header Component with Navigation
// Check if user is authenticated for admin access
const isAuthenticated = Astro.cookies.get('admin_auth')?.value === 'authenticated';
const currentPath = Astro.url.pathname;
---

<header class="global-header">
  <div class="container">
    <div class="header-content">
      <a href="/" class="logo">True Essentials</a>
      <nav class="main-nav">
        <a href="/" class={currentPath === '/' ? 'nav-link active' : 'nav-link'}>
          Home
        </a>
        <a href="/products" class={currentPath.startsWith('/products') ? 'nav-link active' : 'nav-link'}>
          Products
        </a>
        <a href="/test" class={currentPath === '/test' ? 'nav-link active' : 'nav-link'}>
          Test
        </a>
        <a href="/admin" class={currentPath.startsWith('/admin') ? 'nav-link admin-link active' : 'nav-link admin-link'}>
          {isAuthenticated ? 'üîê Admin' : 'üë§ Login'}
        </a>
      </nav>
      
      <!-- Mobile menu toggle -->
      <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    
    <!-- Mobile navigation -->
    <nav class="mobile-nav" id="mobile-nav">
      <a href="/" class={currentPath === '/' ? 'mobile-nav-link active' : 'mobile-nav-link'}>
        Home
      </a>
      <a href="/products" class={currentPath.startsWith('/products') ? 'mobile-nav-link active' : 'mobile-nav-link'}>
        Products
      </a>
      <a href="/test" class={currentPath === '/test' ? 'mobile-nav-link active' : 'mobile-nav-link'}>
        Test
      </a>
      <a href="/admin" class={currentPath.startsWith('/admin') ? 'mobile-nav-link admin-link active' : 'mobile-nav-link admin-link'}>
        {isAuthenticated ? 'üîê Admin Dashboard' : 'üë§ Admin Login'}
      </a>
    </nav>
  </div>
</header>

<style>
  /* ==========================================================================
     DESIGN SYSTEM VARIABLES (matching main site)
     ========================================================================== */
  
  :root {
    /* Typography Scale */
    --font-primary: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-display: 'Playfair Display', Georgia, serif;
    
    --text-sm: clamp(0.875rem, 0.84rem + 0.18vw, 0.95rem);
    --text-base: clamp(1rem, 0.95rem + 0.24vw, 1.125rem);
    --text-lg: clamp(1.125rem, 1.05rem + 0.37vw, 1.35rem);
    --text-xl: clamp(1.25rem, 1.15rem + 0.5vw, 1.6rem);
    
    /* Professional Color Palette */
    --color-primary-50: #f0f9ff;
    --color-primary-100: #e0f2fe;
    --color-primary-200: #bae6fd;
    --color-primary-500: #0ea5e9;
    --color-primary-600: #0284c7;
    --color-primary-700: #0369a1;
    
    /* Sophisticated Neutral Palette */
    --color-gray-50: #fafafa;
    --color-gray-100: #f4f4f5;
    --color-gray-200: #e4e4e7;
    --color-gray-400: #a1a1aa;
    --color-gray-500: #71717a;
    --color-gray-600: #52525b;
    --color-gray-700: #3f3f46;
    --color-gray-900: #18181b;
    
    /* Semantic Colors */
    --color-background: #ffffff;
    --color-text-primary: var(--color-gray-900);
    --color-text-secondary: var(--color-gray-600);
    --color-text-muted: var(--color-gray-500);
    --color-border: var(--color-gray-200);
    
    /* Spacing Scale */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    
    /* Border Radius */
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }

  /* ==========================================================================
     PROFESSIONAL HEADER STYLING
     ========================================================================== */

  .global-header {
    background: var(--color-background);
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.95);
    box-shadow: var(--shadow-sm);
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 1px solid var(--color-border);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .global-header:hover {
    box-shadow: var(--shadow-md);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding-left: var(--space-4);
    padding-right: var(--space-4);
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-4) 0;
    position: relative;
  }

  /* ==========================================================================
     LOGO STYLING
     ========================================================================== */

  .logo {
    font-family: var(--font-display);
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--color-primary-700);
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    letter-spacing: -0.025em;
    position: relative;
  }

  .logo::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--color-primary-500), var(--color-primary-700));
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .logo:hover {
    color: var(--color-primary-600);
    transform: translateY(-1px);
  }

  .logo:hover::after {
    width: 100%;
  }

  /* ==========================================================================
     NAVIGATION STYLING
     ========================================================================== */

  .main-nav {
    display: flex;
    gap: var(--space-2);
    align-items: center;
  }

  .nav-link {
    color: var(--color-text-secondary);
    text-decoration: none;
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-md);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    font-size: var(--text-base);
    position: relative;
    overflow: hidden;
  }

  .nav-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(14, 165, 233, 0.1), transparent);
    transition: left 0.5s;
  }

  .nav-link:hover {
    color: var(--color-primary-600);
    background-color: var(--color-primary-50);
    transform: translateY(-1px);
  }

  .nav-link:hover::before {
    left: 100%;
  }

  .nav-link.active {
    color: var(--color-primary-700);
    background-color: var(--color-primary-100);
    font-weight: 600;
    box-shadow: var(--shadow-sm);
  }

  .admin-link {
    background: linear-gradient(135deg, var(--color-gray-50), var(--color-gray-100));
    border: 1px solid var(--color-border);
    font-size: var(--text-sm);
  }

  .admin-link:hover {
    background: linear-gradient(135deg, var(--color-primary-50), var(--color-primary-100));
    border-color: var(--color-primary-200);
    color: var(--color-primary-700);
  }

  .admin-link.active {
    background: linear-gradient(135deg, var(--color-primary-100), var(--color-primary-200));
    border-color: var(--color-primary-300);
    color: var(--color-primary-800);
    box-shadow: var(--shadow-md);
  }

  /* ==========================================================================
     MOBILE MENU STYLING
     ========================================================================== */

  .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--space-2);
    gap: var(--space-1);
    border-radius: var(--radius-md);
    transition: all 0.3s ease;
  }

  .mobile-menu-toggle:hover {
    background-color: var(--color-gray-100);
  }

  .mobile-menu-toggle span {
    width: 20px;
    height: 2px;
    background-color: var(--color-gray-600);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 1px;
  }

  .mobile-menu-toggle:hover span {
    background-color: var(--color-primary-600);
  }

  /* Mobile menu animation states */
  .mobile-menu-toggle.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }

  .mobile-menu-toggle.active span:nth-child(2) {
    opacity: 0;
  }

  .mobile-menu-toggle.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px);
  }

  .mobile-nav {
    display: none;
    flex-direction: column;
    background: var(--color-background);
    border-top: 1px solid var(--color-border);
    padding: var(--space-4) 0;
    margin-top: var(--space-4);
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    box-shadow: var(--shadow-lg);
    animation: slideDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .mobile-nav.active {
    display: flex;
  }

  .mobile-nav-link {
    color: var(--color-text-secondary);
    text-decoration: none;
    padding: var(--space-3) var(--space-4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    border-radius: var(--radius-md);
    margin: 0 var(--space-4);
    position: relative;
  }

  .mobile-nav-link::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 60%;
    background: var(--color-primary-500);
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 0 2px 2px 0;
  }

  .mobile-nav-link:hover {
    color: var(--color-primary-600);
    background-color: var(--color-primary-50);
    padding-left: var(--space-6);
  }

  .mobile-nav-link:hover::before {
    width: 3px;
  }

  .mobile-nav-link.active {
    color: var(--color-primary-700);
    background-color: var(--color-primary-100);
    font-weight: 600;
    padding-left: var(--space-6);
  }

  .mobile-nav-link.active::before {
    width: 3px;
  }

  .mobile-nav-link.admin-link {
    border-top: 1px solid var(--color-border);
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    background: linear-gradient(135deg, var(--color-gray-50), transparent);
  }

  /* ==========================================================================
     RESPONSIVE DESIGN
     ========================================================================== */

  @media (max-width: 768px) {
    .main-nav {
      display: none;
    }

    .mobile-menu-toggle {
      display: flex;
    }

    .header-content {
      padding: var(--space-3) 0;
    }

    .logo {
      font-size: var(--text-lg);
    }

    .container {
      padding-left: var(--space-4);
      padding-right: var(--space-4);
    }
  }

  @media (max-width: 480px) {
    .mobile-nav-link {
      padding: var(--space-4) var(--space-4);
      font-size: var(--text-base);
    }
  }
</style>

<script>
  // Mobile menu toggle functionality
  function toggleMobileMenu() {
    const mobileNav = document.getElementById('mobile-nav');
    const toggle = document.querySelector('.mobile-menu-toggle');
    
    if (mobileNav && toggle) {
      mobileNav.classList.toggle('active');
      toggle.classList.toggle('active');
    }
  }

  // Close mobile menu when clicking outside
  document.addEventListener('click', function(event: Event) {
    const mobileNav = document.getElementById('mobile-nav');
    const toggle = document.querySelector('.mobile-menu-toggle');
    const header = document.querySelector('.global-header');
    
    if (mobileNav && toggle && header && event.target instanceof Node) {
      if (!header.contains(event.target) && mobileNav.classList.contains('active')) {
        mobileNav.classList.remove('active');
        toggle.classList.remove('active');
      }
    }
  });

  // Smooth scroll behavior for navigation links
  document.querySelectorAll('a[href^="#"]').forEach((anchor: Element) => {
    anchor.addEventListener('click', function (this: HTMLElement, e: Event) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href') || '');
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
</script> 